<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Import-modules">Import modules<a class="anchor-link" href="#Import-modules">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Save-csv-data-to-database-variable-df">Save csv data to database variable df<a class="anchor-link" href="#Save-csv-data-to-database-variable-df">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../../static/documents/regex_pandax_column.csv&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Inspect-Dataframe-Dimensions">Inspect Dataframe Dimensions<a class="anchor-link" href="#Inspect-Dataframe-Dimensions">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(42, 700)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are 700 columns and 42 rows</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;The number of columns in this dataset is: {len(df.columns)}&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>The number of columns in this dataset is: 700
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Inspect-Dataframe">Inspect Dataframe<a class="anchor-link" href="#Inspect-Dataframe">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[5]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>FORM[0].Section1[0].Header1[0].FirstName[0]</th>
      <th>FORM[0].Section1[0].Header1[0].LastName[0]</th>
      <th>FORM[0].Section1[0].Header1[0].Datecompleted[0]</th>
      <th>FORM[0].Section1[0].Header1[0].Rank[0]</th>
      <th>FORM[0].Section1[0].Header1[0].Tenure[0]</th>
      <th>FORM[0].Section1[0].Header1[0].Timeperiodstartdate[0]</th>
      <th>FORM[0].Section1[0].Header1[0].AcademicActivities[0]</th>
      <th>FORM[0].Section1[0].Header1[0].ClinicalPractice[0]</th>
      <th>FORM[0].Section1[0].Header1[0].Scholarly[0]</th>
      <th>FORM[0].Section1[0].Header1[0].ExternalProfessional[0]</th>
      <th>...</th>
      <th>FORM[0].SciAbstracts[0].Row1[7].SciAbstractAdditionalroles[0]</th>
      <th>FORM[0].SciAbstracts[0].Row1[7].SciAbstractTypeofmeeting[0]</th>
      <th>FORM[0].SciAbstracts[0].Row1[7].SciAbstractPodPoster[0]</th>
      <th>FORM[0].SciAbstracts[0].Row1[8].SpeakerAuthor[0]</th>
      <th>FORM[0].SciAbstracts[0].Row1[8].SpeakerDVMStudent[0]</th>
      <th>FORM[0].SciAbstracts[0].Row1[8].SpeakerTitle[0]</th>
      <th>FORM[0].SciAbstracts[0].Row1[8].SciAbstractDates[0]</th>
      <th>FORM[0].SciAbstracts[0].Row1[8].SciAbstractAdditionalroles[0]</th>
      <th>FORM[0].SciAbstracts[0].Row1[8].SciAbstractTypeofmeeting[0]</th>
      <th>FORM[0].SciAbstracts[0].Row1[8].SciAbstractPodPoster[0]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>SHHM</td>
      <td>XSRQ</td>
      <td>BLHB</td>
      <td>CRWY</td>
      <td>VQHG</td>
      <td>AGYD</td>
      <td>RCQC</td>
      <td>GLQU</td>
      <td>WDFV</td>
      <td>JPYA</td>
      <td>...</td>
      <td>BANG</td>
      <td>PIMY</td>
      <td>EFUO</td>
      <td>XCAB</td>
      <td>RNXB</td>
      <td>XDQH</td>
      <td>MXQL</td>
      <td>QDSJ</td>
      <td>NWRK</td>
      <td>AJKI</td>
    </tr>
    <tr>
      <th>1</th>
      <td>CYJX</td>
      <td>WJKW</td>
      <td>YGEV</td>
      <td>EHGG</td>
      <td>GBMR</td>
      <td>BQQH</td>
      <td>UQVS</td>
      <td>QNGY</td>
      <td>DRCQ</td>
      <td>DJHS</td>
      <td>...</td>
      <td>CLFT</td>
      <td>SMMD</td>
      <td>LJNO</td>
      <td>SOMG</td>
      <td>DXUL</td>
      <td>DEHL</td>
      <td>WRQH</td>
      <td>BHFC</td>
      <td>FWGU</td>
      <td>AQGM</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PEOA</td>
      <td>TSSF</td>
      <td>XXRG</td>
      <td>SKRG</td>
      <td>LSID</td>
      <td>FHKU</td>
      <td>YQCQ</td>
      <td>TECF</td>
      <td>YPJV</td>
      <td>QARI</td>
      <td>...</td>
      <td>UWWH</td>
      <td>YFEM</td>
      <td>BLTK</td>
      <td>GWMV</td>
      <td>PMNX</td>
      <td>RDUA</td>
      <td>BEGG</td>
      <td>JHWJ</td>
      <td>BOXX</td>
      <td>GSQB</td>
    </tr>
  </tbody>
</table>
<p>3 rows Ã— 700 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Column headers are difficult to read, the file contains metadata information for the fields the data was exported.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Inspect-a-subset-of-the-Columns">Inspect a subset of the Columns<a class="anchor-link" href="#Inspect-a-subset-of-the-Columns">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;FORM[0].Section1[0].Header1[0].FirstName[0]&#39;,
       &#39;FORM[0].Section1[0].Header1[0].LastName[0]&#39;,
       &#39;FORM[0].Section1[0].Header1[0].Datecompleted[0]&#39;,
       &#39;FORM[0].Section1[0].Header1[0].Rank[0]&#39;,
       &#39;FORM[0].Section1[0].Header1[0].Tenure[0]&#39;,
       &#39;FORM[0].Section1[0].Header1[0].Timeperiodstartdate[0]&#39;,
       &#39;FORM[0].Section1[0].Header1[0].AcademicActivities[0]&#39;,
       &#39;FORM[0].Section1[0].Header1[0].ClinicalPractice[0]&#39;,
       &#39;FORM[0].Section1[0].Header1[0].Scholarly[0]&#39;,
       &#39;FORM[0].Section1[0].Header1[0].ExternalProfessional[0]&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The column headers from the data exported from an adobe form has extra information about the document itself, and the actual column headers are embedded deep inside these strings.<br><br>
FORM[0].Section1[0].Header1[0].<font color ="red">FirstName</font>[0]</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Goal:-Use-pandas-and-Regular-Expression-to">Goal: Use pandas and Regular Expression to<a class="anchor-link" href="#Goal:-Use-pandas-and-Regular-Expression-to">&#182;</a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Extract-Column-Name-using-pandas.Series.str.extract">Extract Column Name using <font color="red">pandas.Series.str.extract</font><a class="anchor-link" href="#Extract-Column-Name-using-pandas.Series.str.extract">&#182;</a></h3><ul>
<li>This method will capture groups in the regex pattern as columns in a DataFrame.</li>
<li><code>Series.str.extract(self, pat, flags=0, expand=True)</code></li>
<li>Documentation: <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.extract.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.extract.html</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;((?&lt;=\.)[a-zA-Z0-9]+(?=\[0\]$))&#39;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Pattern-explained">Pattern explained<a class="anchor-link" href="#Pattern-explained">&#182;</a></h3><p><b>Code: </b><code>r''</code><br>
<em>What is this?</em> <br>
This is a special string designation that let's python know that all the characters inside the quotations will be evaluated differently using the <code>re</code> module.<br>
<br>
<b>Code: </b><code>(?<=\\.)</code><br>
<em>What is this?</em>
<br>
This is a <font color="blue">positive lookbehind assertion</font>, which helps set the starting point for the pattern you want to match.
<br>
In this example, we want to match the red <code>.</code> that comes before the actual column name we want: "FirstName"
<br>
FORM[0].Section1[0].Header1[0]<font color ="red"><b>.</b></font>FirstName[0]
<br>
Note, there are three other <font color ="red"><b>.</b></font>'s in this string so we need a way to just select the last one as the starting point.<br> 
<br>
<b>Code: </b> <code>\(?=\\[0\\]$\) </code><br>
<em>What is this?</em><br></p>
<p>This is a <font color="blue">lookahead assertion</font> that finds the first expression that has the pattern <code>[0]</code> after it<br>
The slashes in the <code>[\\[0\\]]</code> tell the re module that the brackets are actual characters in the pattern, without the backslashes, the re module will interpret the brackets differentently.<br>
<br> 
The <code>&dollar;</code> character tells the re module to only look for this pattern at the end of the string.<br>
Taken together,  <code>(?=\\[0\\]&dollar;)</code> tells the re module to only match strings at the end of string.<br>
This will ensure we are only getting the column name<br>
<br>
<b>Code: </b><code>\\[a-zA-Z0-9\]+</code><br>
<em>What is this?</em><br>
<code>a-zA-Z</code> will match any alphabetic character.<br>
<code>0-9</code> will match any digit between 0-9.<br>
<code>+</code> will allow more than one of these characters.<br>
Taken together, this will allow any word with numbers to exist between the lookahead assertion and the positive lookbehind assertion.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Infograhic-Summary">Infograhic Summary<a class="anchor-link" href="#Infograhic-Summary">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="static/images/pandas_regex_blog_explained.png"></img></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Replace-all-column-headers-with-extracted-substring">Replace all column headers with extracted substring<a class="anchor-link" href="#Replace-all-column-headers-with-extracted-substring">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># This will replace all the column (csv header strings) with the extracted substring</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">pattern</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Index([(&#39;FirstName&#39;,), (&#39;LastName&#39;,), (&#39;Datecompleted&#39;,), (&#39;Rank&#39;,),
       (&#39;Tenure&#39;,)],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="The-returned-data-is-a-tuple!">The returned data is a tuple!<a class="anchor-link" href="#The-returned-data-is-a-tuple!">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;The returned datatype is a Tuple: {isinstance(df.columns[0], tuple)}!&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>The returned datatype is a Tuple: True!
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Use-a-list-comprehension-to-replace-tuple-header-columns-with-a-single-substring">Use a list comprehension to replace tuple header columns with a single substring<a class="anchor-link" href="#Use-a-list-comprehension-to-replace-tuple-header-columns-with-a-single-substring">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Step-1:-Prepare-the-for-loop">Step 1: Prepare the for loop<a class="anchor-link" href="#Step-1:-Prepare-the-for-loop">&#182;</a></h3><p><font color="blue">for</font> <strong><font color="orange">x, y</font></strong> in <font color="red">enumerate(df.columns)</font>:</p>
<p><p style="margin-left:10px; margin-right:50px;">
    <font color="purple">df.columns</font>.append(<strong><font color="991B05">df.columns[<font color="orange">x</font>][0]</font></strong>)<br></p></p>
<hr style="border: 1px solid black;">

<h3 id="Step-2:-Rearrange-into-a-list-comprehension">Step 2: Rearrange into a list comprehension<a class="anchor-link" href="#Step-2:-Rearrange-into-a-list-comprehension">&#182;</a></h3><p><strong><font color="purple">new list</font></strong> = [<strong><font color="991B05">expression</font></strong> <font color="blue">for</font> <strong><font color="orange">item</font></strong> in <font color="red">old sequence</font>]<br></p>
<p><strong><font color="purple">df.columns</font></strong> = [<strong><font color="991B05">df.columns[<font color="orange">x</font>][0]</font></strong> <font color="blue">for</font> <strong><font color="orange">x, y</font></strong> in <font color="red">enumerate(df.columns)</font>]</p>
<hr style="border: 1px solid black;">
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Confirm-tuples-replaced-with-single-column-substring">Confirm tuples replaced with single column substring<a class="anchor-link" href="#Confirm-tuples-replaced-with-single-column-substring">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;FirstName&#39;, &#39;LastName&#39;, &#39;Datecompleted&#39;, &#39;Rank&#39;, &#39;Tenure&#39;], dtype=&#39;object&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;The returned datatype is a Tuple: {isinstance(df.columns[0], tuple)}!&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>The returned datatype is a Tuple: False!
</pre>
</div>
</div>

</div>
</div>

</div>
 

